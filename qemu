trying to capture the advice i get from Grok

dd if=/dev/zero of=disk.img bs=1M count=8192

losetup /dev/loop0 disk.img

fdisk /dev/loop0
# make it GPT and normal EFI+Linux

losetup -d /dev/loop0

losetup -P /dev/loop0 disk.img

# the -d flag copies from the filetree to the partition after its formatted
mkfs.vfat /dev/loop0p1
mkfs.ext4 -d ./tree /dev/loop0p2

# i think maybe /EFI/BOOT is a required path?
cp /tmp/build/BOOTX64.EFI /mnt/esp/EFI/BOOT/
/boot/efi/EFI/BOOT/BOOTX64.EFI.
